(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{RyC9:function(m,d,n){"use strict";n.r(d);var h=n("VTBJ"),u=n("1OyB"),E=n("vuIU"),l=n("JX7q"),f=n("Ji7U"),v=n("LK+K"),b=n("tU7J"),y=n("wFql"),C=n("q1tI"),t=n.n(C),P=n("Ur6u"),g=n.n(P),R=function(c){var s=c.children;return t.a.createElement("pre",{className:g.a.pre},t.a.createElement("code",null,t.a.createElement(y.a.Text,{copyable:!0},s)))},U=function(p){Object(f.a)(s,p);var c=Object(v.a)(s);function s(r){var e;return Object(u.a)(this,s),e=c.call(this,r),e.state={todoList:[],activeItem:{id:null,title:"",completed:!1},editing:!1},e.fetchTasks=e.fetchTasks.bind(Object(l.a)(e)),e.handleChange=e.handleChange.bind(Object(l.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(l.a)(e)),e.getCookie=e.getCookie.bind(Object(l.a)(e)),e.startEdit=e.startEdit.bind(Object(l.a)(e)),e.deleteItem=e.deleteItem.bind(Object(l.a)(e)),e}return Object(E.a)(s,[{key:"getCookie",value:function(e){var a=null;if(document.cookie&&document.cookie!=="")for(var _=document.cookie.split(";"),o=0;o<_.length;o++){var i=_[o].trim();if(i.substring(0,e.length+1)===e+"="){a=decodeURIComponent(i.substring(e.length+1));break}}return a}},{key:"componentWillMount",value:function(){this.fetchTasks()}},{key:"fetchTasks",value:function(){var e=this;console.log("Fetching..."),fetch("https://drfserver.pythonanywhere.com/api/task-list/").then(function(a){return a.json()}).then(function(a){return e.setState({todoList:a})})}},{key:"handleChange",value:function(e){var a=e.target.name,_=e.target.value;console.log("Name:",a),console.log("Value:",_),this.setState({activeItem:Object(h.a)(Object(h.a)({},this.state.activeItem),{},{title:_})})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),console.log("ITEM:",this.state.activeItem);var _=this.getCookie("csrftoken"),o="https://drfserver.pythonanywhere.com/api/task-create/";this.state.editing==!0&&(o="https://drfserver.pythonanywhere.com/api/task-update/".concat(this.state.activeItem.id,"/"),this.setState({editing:!1})),fetch(o,{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":_},body:JSON.stringify(this.state.activeItem)}).then(function(i){a.fetchTasks(),a.setState({activeItem:{id:null,title:"",completed:!1}})}).catch(function(i){console.log("ERROR:",i)})}},{key:"startEdit",value:function(e){this.setState({activeItem:e,editing:!0})}},{key:"deleteItem",value:function(e){var a=this,_=this.getCookie("csrftoken");fetch("https://drfserver.pythonanywhere.com/api/task-delete/".concat(e.id,"/"),{method:"DELETE",headers:{"Content-type":"application/json","X-CSRFToken":_}}).then(function(o){a.fetchTasks()})}},{key:"render",value:function(){var e=this.state.todoList,a=this;return t.a.createElement("div",{className:"container"},t.a.createElement("div",{id:"task-container"},t.a.createElement("div",{id:"form-wrapper"},t.a.createElement("form",{onSubmit:this.handleSubmit,id:"form"},t.a.createElement("div",{className:"flex-wrapper"},t.a.createElement("div",{style:{flex:6}},t.a.createElement("input",{onChange:this.handleChange,className:"form-control",id:"title",value:this.state.activeItem.title,type:"text",name:"title",placeholder:"Add task.."})),t.a.createElement("div",{style:{flex:1}},t.a.createElement("input",{id:"submit",className:"btn btn-warning",type:"submit",name:"Add"}))))),t.a.createElement("div",{id:"list-wrapper"},e.map(function(_,o){return t.a.createElement("div",{key:o,className:"task-wrapper flex-wrapper"},t.a.createElement("div",{style:{flex:7}},t.a.createElement("span",null,_.title)),t.a.createElement("div",{style:{flex:1}},t.a.createElement("button",{onClick:function(){return a.startEdit(_)},className:"btn btn-sm btn-outline-info"},"Edit")),t.a.createElement("div",{style:{flex:1}},t.a.createElement("button",{onClick:function(){return a.deleteItem(_)},className:"btn btn-sm btn-outline-dark delete"},"-")))}))))}}]),s}(t.a.Component);d.default=U},Ur6u:function(m,d,n){m.exports={pre:"pre___3fTUI"}}}]);
